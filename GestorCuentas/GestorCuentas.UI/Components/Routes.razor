<Router AppAssembly="typeof(Program).Assembly">
    <Found Context="routeData">
        @if (IsAnonymousRoute(routeData))
        {
            <RouteView RouteData="routeData" DefaultLayout="typeof(Layout.MainLayout)" />
        }
        else
        {
            <AuthorizeRouteView RouteData="routeData" DefaultLayout="typeof(Layout.MainLayout)">
                <NotAuthorized>
                    <div class="container py-4">
                        <h1 class="display-6">No autorizado</h1>
                        <p class="text-muted">Inicia sesi칩n para acceder al contenido protegido.</p>
                        <a class="btn btn-primary" href="/login">Ir al inicio de sesi칩n</a>
                    </div>
                </NotAuthorized>
            </AuthorizeRouteView>
        }
        <FocusOnNavigate RouteData="routeData" Selector="h1" />
    </Found>
    <NotFound>
        <LayoutView Layout="typeof(Layout.MainLayout)">
            <div class="container py-4">
                <h1 class="display-6">P치gina no encontrada</h1>
                <p class="text-muted">Verifica la direcci칩n o regresa al inicio.</p>
                <a class="btn btn-primary" href="/login">Ir al inicio</a>
            </div>
        </LayoutView>
    </NotFound>
</Router>

@code {
    private static bool IsAnonymousRoute(RouteData routeData)
    {
        return routeData.PageType.GetCustomAttributes(typeof(AllowAnonymousAttribute), inherit: true).Any();
    }
}
